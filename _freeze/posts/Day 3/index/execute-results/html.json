{
  "hash": "8f529fdbbc69ca575f1de5f21d4cd11e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Day 3: Counts and Quantities\"\nauthor: \"Vasantha M\"\nformat: html\neditor: visual\n---\n\n\n\n## Introduction:\n\n> ### Notes\n>\n> -   \n\n## Setup Chunk:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(mosaic)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRegistered S3 method overwritten by 'mosaic':\n  method                           from   \n  fortify.SpatialPolygonsDataFrame ggplot2\n\nThe 'mosaic' package masks several functions from core packages in order to add \nadditional features.  The original behavior of these functions should not be affected by this.\n\nAttaching package: 'mosaic'\n\nThe following object is masked from 'package:Matrix':\n\n    mean\n\nThe following objects are masked from 'package:dplyr':\n\n    count, do, tally\n\nThe following object is masked from 'package:purrr':\n\n    cross\n\nThe following object is masked from 'package:ggplot2':\n\n    stat\n\nThe following objects are masked from 'package:stats':\n\n    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,\n    quantile, sd, t.test, var\n\nThe following objects are masked from 'package:base':\n\n    max, mean, min, prod, range, sample, sum\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggformula)\nlibrary(skimr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'skimr'\n\nThe following object is masked from 'package:mosaic':\n\n    n_missing\n```\n\n\n:::\n:::\n\n\n\n## Reading Data:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi <- read_csv(\"https://vincentarelbundock.github.io/Rdatasets/csv/modeldata/taxi.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 10000 Columns: 8\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): tip, company, local, dow, month\ndbl (3): rownames, distance, hour\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\ntaxi\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10,000 × 8\n   rownames tip   distance company                      local dow   month  hour\n      <dbl> <chr>    <dbl> <chr>                        <chr> <chr> <chr> <dbl>\n 1        1 yes      17.2  Chicago Independents         no    Thu   Feb      16\n 2        2 yes       0.88 City Service                 yes   Thu   Mar       8\n 3        3 yes      18.1  other                        no    Mon   Feb      18\n 4        4 yes      20.7  Chicago Independents         no    Mon   Apr       8\n 5        5 yes      12.2  Chicago Independents         no    Sun   Mar      21\n 6        6 yes       0.94 Sun Taxi                     yes   Sat   Apr      23\n 7        7 yes      17.5  Flash Cab                    no    Fri   Mar      12\n 8        8 yes      17.7  other                        no    Sun   Jan       6\n 9        9 yes       1.85 Taxicab Insurance Agency Llc no    Fri   Apr      12\n10       10 yes       1.47 City Service                 no    Tue   Mar      14\n# ℹ 9,990 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 10,000\nColumns: 8\n$ rownames <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ tip      <chr> \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\", \"yes\"…\n$ distance <dbl> 17.19, 0.88, 18.11, 20.70, 12.23, 0.94, 17.47, 17.67, 1.85, 1…\n$ company  <chr> \"Chicago Independents\", \"City Service\", \"other\", \"Chicago Ind…\n$ local    <chr> \"no\", \"yes\", \"no\", \"no\", \"no\", \"yes\", \"no\", \"no\", \"no\", \"no\",…\n$ dow      <chr> \"Thu\", \"Thu\", \"Mon\", \"Mon\", \"Sun\", \"Sat\", \"Fri\", \"Sun\", \"Fri\"…\n$ month    <chr> \"Feb\", \"Mar\", \"Feb\", \"Apr\", \"Mar\", \"Apr\", \"Mar\", \"Jan\", \"Apr\"…\n$ hour     <dbl> 16, 8, 18, 8, 21, 23, 12, 6, 12, 14, 18, 11, 12, 19, 17, 13, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi %>%inspect()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n     name     class levels     n missing\n1     tip character      2 10000       0\n2 company character      7 10000       0\n3   local character      2 10000       0\n4     dow character      7 10000       0\n5   month character      4 10000       0\n                                   distribution\n1 yes (92.1%), no (7.9%)                       \n2 other (27.1%) ...                            \n3 no (81.2%), yes (18.8%)                      \n4 Thu (19.6%), Wed (17.5%), Tue (16.3%) ...    \n5 Apr (31.8%), Mar (31.4%), Feb (20.4%) ...    \n\nquantitative variables:  \n      name   class min      Q1  median        Q3     max        mean\n1 rownames numeric   1 2500.75 5000.50 7500.2500 10000.0 5000.500000\n2 distance numeric   0    0.94    1.78   15.5625    42.3    6.224144\n3     hour numeric   0   11.00   15.00   18.0000    23.0   14.177300\n           sd     n missing\n1 2886.895680 10000       0\n2    7.381397 10000       0\n3    4.359904 10000       0\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi %>% skim()\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |           |\n|:------------------------|:----------|\n|Name                     |Piped data |\n|Number of rows           |10000      |\n|Number of columns        |8          |\n|_______________________  |           |\n|Column type frequency:   |           |\n|character                |5          |\n|numeric                  |3          |\n|________________________ |           |\n|Group variables          |None       |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|tip           |         0|             1|   2|   3|     0|        2|          0|\n|company       |         0|             1|   5|  28|     0|        7|          0|\n|local         |         0|             1|   2|   3|     0|        2|          0|\n|dow           |         0|             1|   3|   3|     0|        7|          0|\n|month         |         0|             1|   3|   3|     0|        4|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|    mean|      sd| p0|     p25|     p50|     p75|    p100|hist  |\n|:-------------|---------:|-------------:|-------:|-------:|--:|-------:|-------:|-------:|-------:|:-----|\n|rownames      |         0|             1| 5000.50| 2886.90|  1| 2500.75| 5000.50| 7500.25| 10000.0|▇▇▇▇▇ |\n|distance      |         0|             1|    6.22|    7.38|  0|    0.94|    1.78|   15.56|    42.3|▇▁▂▁▁ |\n|hour          |         0|             1|   14.18|    4.36|  0|   11.00|   15.00|   18.00|    23.0|▁▃▅▇▃ |\n\n\n:::\n:::\n\n\n\n## Munging Data\n\n### Converting Qual Variables into Factors:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedA <- taxi %>%\n  dplyr::mutate(\n    tip = as_factor(tip),\n    local = as_factor(local),\n    month = as_factor(month),\n    dow = as_factor(dow),\n    company = as_factor(company),\n    hour = as_factor(hour)\n    \n  )\nglimpse(taxi_modifiedA)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 10,000\nColumns: 8\n$ rownames <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ tip      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, y…\n$ distance <dbl> 17.19, 0.88, 18.11, 20.70, 12.23, 0.94, 17.47, 17.67, 1.85, 1…\n$ company  <fct> Chicago Independents, City Service, other, Chicago Independen…\n$ local    <fct> no, yes, no, no, no, yes, no, no, no, no, no, no, no, yes, no…\n$ dow      <fct> Thu, Thu, Mon, Mon, Sun, Sat, Fri, Sun, Fri, Tue, Tue, Sun, W…\n$ month    <fct> Feb, Mar, Feb, Apr, Mar, Apr, Mar, Jan, Apr, Mar, Mar, Apr, A…\n$ hour     <fct> 16, 8, 18, 8, 21, 23, 12, 6, 12, 14, 18, 11, 12, 19, 17, 13, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedA %>%inspect()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n     name  class levels     n missing\n1     tip factor      2 10000       0\n2 company factor      7 10000       0\n3   local factor      2 10000       0\n4     dow factor      7 10000       0\n5   month factor      4 10000       0\n6    hour factor     23 10000       0\n                                   distribution\n1 yes (92.1%), no (7.9%)                       \n2 other (27.1%) ...                            \n3 no (81.2%), yes (18.8%)                      \n4 Thu (19.6%), Wed (17.5%), Tue (16.3%) ...    \n5 Apr (31.8%), Mar (31.4%), Feb (20.4%) ...    \n6 17 (9%), 18 (8.5%), 16 (8.1%) ...            \n\nquantitative variables:  \n      name   class min      Q1  median        Q3     max        mean\n1 rownames numeric   1 2500.75 5000.50 7500.2500 10000.0 5000.500000\n2 distance numeric   0    0.94    1.78   15.5625    42.3    6.224144\n           sd     n missing\n1 2886.895680 10000       0\n2    7.381397 10000       0\n```\n\n\n:::\n:::\n\n\n\n### Ordered Factors - Levels and Labels\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Convert `dow`, `local`, and `month` into ordered factors\ntaxi_modifiedB <- taxi_modifiedA %>%\n  mutate(\n    dow = factor(dow,\n      levels = c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"),\n      labels = c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"),\n      ordered = TRUE\n    ),\n    ##\n    local = factor(local,\n      levels = c(\"yes\", \"no\"),\n      labels = c(\"yes\", \"no\"),\n      ordered = TRUE\n    ),\n    ##\n    month = factor(month,\n      levels = c(\"Jan\", \"Feb\", \"Mar\", \"Apr\"),\n      labels = c(\"Jan\", \"Feb\", \"Mar\", \"Apr\"),\n      ordered = TRUE\n    )\n  )\ntaxi_modifiedB %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 10,000\nColumns: 8\n$ rownames <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…\n$ tip      <fct> yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, yes, y…\n$ distance <dbl> 17.19, 0.88, 18.11, 20.70, 12.23, 0.94, 17.47, 17.67, 1.85, 1…\n$ company  <fct> Chicago Independents, City Service, other, Chicago Independen…\n$ local    <ord> no, yes, no, no, no, yes, no, no, no, no, no, no, no, yes, no…\n$ dow      <ord> Thu, Thu, Mon, Mon, Sun, Sat, Fri, Sun, Fri, Tue, Tue, Sun, W…\n$ month    <ord> Feb, Mar, Feb, Apr, Mar, Apr, Mar, Jan, Apr, Mar, Mar, Apr, A…\n$ hour     <fct> 16, 8, 18, 8, 21, 23, 12, 6, 12, 14, 18, 11, 12, 19, 17, 13, …\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>% inspect()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n     name   class levels     n missing\n1     tip  factor      2 10000       0\n2 company  factor      7 10000       0\n3   local ordered      2 10000       0\n4     dow ordered      7 10000       0\n5   month ordered      4 10000       0\n6    hour  factor     23 10000       0\n                                   distribution\n1 yes (92.1%), no (7.9%)                       \n2 other (27.1%) ...                            \n3 no (81.2%), yes (18.8%)                      \n4 Thu (19.6%), Wed (17.5%), Tue (16.3%) ...    \n5 Apr (31.8%), Mar (31.4%), Feb (20.4%) ...    \n6 17 (9%), 18 (8.5%), 16 (8.1%) ...            \n\nquantitative variables:  \n      name   class min      Q1  median        Q3     max        mean\n1 rownames numeric   1 2500.75 5000.50 7500.2500 10000.0 5000.500000\n2 distance numeric   0    0.94    1.78   15.5625    42.3    6.224144\n           sd     n missing\n1 2886.895680 10000       0\n2    7.381397 10000       0\n```\n\n\n:::\n:::\n\n\n\n## Q1.A: Do more people tip than not?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngf_bar(~tip, data = taxi_modifiedB) %>%\n  gf_labs(title = \"Plot 1: Counts of Tips\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n## Q2.A: Does the tip depend upon whether the trip is local or not?\n\n> ### Notes:\n>\n> -   color vs fill\n>\n> -   where are the colours coming from\n>\n> -   position: dodge vs stacked - DEFAULT IS STACKED\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~local,\n    color = ~tip,\n    position = \"dodge\"\n  ) %>%\n  gf_labs(title = \"Plot 2A.1: Dodged Bar Chart\",\n          subtitle = \"Using Colour\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~local,\n    fill = ~tip,\n    position = \"dodge\"\n  ) %>%\n  gf_labs(title = \"Plot 2A.2: Dodged Bar Chart\",\n          subtitle = \"Using Fill\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~tip,\n    fill = ~local,\n    position = \"dodge\"\n  ) %>%\n  gf_labs(title = \"Plot 2A.3: Dodged Bar Chart\",\n          subtitle = \"Flipping 'local' and 'tip' variables:\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~local,\n    fill = ~tip,\n    position = \"stack\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 2B.1: Stacked Bar Chart\",\n    subtitle = \"Can we spot per group differences in proportions??\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~tip,\n    fill = ~local,\n    position = \"stack\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 2B.2: Stacked Bar Chart\",\n    subtitle = \"Flipping 'local' and 'tip' variables:\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~local,\n    fill = ~tip,\n    position = \"fill\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 2C: Filled Bar Chart\",\n    subtitle = \"Comparing using perecentages and ratios\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\n> ### Understandings from Graphs:\n>\n> -   Plot 2B. 1: People tip more often than not, regardless of if the trip is local or not.\n>\n> -   Plot 2B. 2: Majority of those who tip are going on trips that are not local. This may be true, but its not the *whole truth*.\n>\n>     *BECAUSE PERCENTAGS MATTER - THE NUMBER OF TRIPS THAT ARE LOCAL AND NOT LOCAL ARE NOT THE SAME.*\n>\n> -   Plot 2C: Now we can say,\n\n## Q3: Do some cab companies get more tips than others?\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~ company,\n    fill = ~tip,\n    position = \"fill\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 3A: Filled Bar Chart\",\n    subtitle = \"Comparing using perecentages and ratios by company\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n\n### Re-Ordering the columns.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedC <- taxi_modifiedB %>% \n  group_by(company) %>%\n  summarise(tip_prop = prop(tip))%>% arrange(tip_prop)\ntaxi_modifiedC\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 2\n  company                      tip_prop\n  <fct>                           <dbl>\n1 Flash Cab                       0.869\n2 Taxi Affiliation Services       0.906\n3 Taxicab Insurance Agency Llc    0.925\n4 City Service                    0.927\n5 other                           0.928\n6 Sun Taxi                        0.939\n7 Chicago Independents            0.949\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedC %>%\n  gf_bar(~ company,\n    fill = ~tip_prop,\n    position = \"fill\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 3A: Filled Bar Chart\",\n    subtitle = \"Comparing using perecentages and ratios by company\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n\n## Q4: **Does a tip depend upon the distance, hour of day, and DOW and month?**\n\n### Tips by Hour\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~ hour,\n    fill = ~tip,\n    position = \"fill\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 4A: [Tips and Hour] Filled Bar Chart\",\n    subtitle = \"..\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n### Tips by DOW\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~ dow,\n    fill = ~tip,\n    position = \"fill\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 4B: [Tips and DOW] Filled Bar Chart\",\n    subtitle = \"..\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n\n### Tips by month\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntaxi_modifiedB %>%\n  gf_bar(~ month,\n    fill = ~tip,\n    position = \"fill\"\n  ) %>%\n  gf_labs(\n    title = \"Plot 4C: [Tips and Month] Filled Bar Chart\",\n    subtitle = \"..\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n\n### Tips \n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}