{
  "hash": "92a0ebc29c01d5d05a36a25cd2a7b1b7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Day 5: Groups\"\nauthor: \"Vasantha M\"\nformat: html\neditor: visual\n---\n\n\n\n\n\n## Introduction\n\nToday in class we discuss groups and box-plots.\n\n> ### Overview:\n>\n> -   install new package 'palmerpenguins'\n> -   in functions under groups:\n>     -   gf_boxplot()\n>     -   log10(\\*axis\\*)\n>     -   gf_refine()\n>         -   scale_x_log10()\n>         -   scale_fill_brewer()\n>     -   reorder()\n>     -   vars()\n\n### Setup Chunk\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(mosaic)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRegistered S3 method overwritten by 'mosaic':\n  method                           from   \n  fortify.SpatialPolygonsDataFrame ggplot2\n\nThe 'mosaic' package masks several functions from core packages in order to add \nadditional features.  The original behavior of these functions should not be affected by this.\n\nAttaching package: 'mosaic'\n\nThe following object is masked from 'package:Matrix':\n\n    mean\n\nThe following objects are masked from 'package:dplyr':\n\n    count, do, tally\n\nThe following object is masked from 'package:purrr':\n\n    cross\n\nThe following object is masked from 'package:ggplot2':\n\n    stat\n\nThe following objects are masked from 'package:stats':\n\n    binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,\n    quantile, sd, t.test, var\n\nThe following objects are masked from 'package:base':\n\n    max, mean, min, prod, range, sample, sum\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggformula)\nlibrary(palmerpenguins)\n```\n:::\n\n\n\n\n\n## Examining Data:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Looking at the gss wages dataset\nwages <- read_csv(\"https://vincentarelbundock.github.io/Rdatasets/csv/stevedata/gss_wages.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 61697 Columns: 12\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): occrecode, wrkstat, gender, educcat, maritalcat\ndbl (7): rownames, year, realrinc, age, occ10, prestg10, childs\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n\n```{.r .cell-code}\n##\nwages\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 61,697 × 12\n   rownames  year realrinc   age occ10 occrecode  prestg10 childs wrkstat gender\n      <dbl> <dbl>    <dbl> <dbl> <dbl> <chr>         <dbl>  <dbl> <chr>   <chr> \n 1        1  1974     4935    21  5620 Office an…       25      0 School  Male  \n 2        2  1974    43178    41  2040 Professio…       66      3 Full-T… Male  \n 3        3  1974       NA    83    NA <NA>             NA      2 Housek… Female\n 4        4  1974       NA    69    NA <NA>             NA      2 Housek… Female\n 5        5  1974    18505    58  5820 Office an…       37      0 Full-T… Female\n 6        6  1974    22206    30   910 Business/…       45      0 School  Male  \n 7        7  1974    55515    48   230 Business/…       59      2 Full-T… Male  \n 8        8  1974       NA    67  6355 Construct…       49      1 Retired Male  \n 9        9  1974       NA    51  4720 Sales            28      2 Housek… Female\n10       10  1974     4935    54  3940 Service          38      2 Full-T… Female\n# ℹ 61,687 more rows\n# ℹ 2 more variables: educcat <chr>, maritalcat <chr>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwages %>% glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 61,697\nColumns: 12\n$ rownames   <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ year       <dbl> 1974, 1974, 1974, 1974, 1974, 1974, 1974, 1974, 1974, 1974,…\n$ realrinc   <dbl> 4935, 43178, NA, NA, 18505, 22206, 55515, NA, NA, 4935, NA,…\n$ age        <dbl> 21, 41, 83, 69, 58, 30, 48, 67, 51, 54, 89, 71, 27, 30, 22,…\n$ occ10      <dbl> 5620, 2040, NA, NA, 5820, 910, 230, 6355, 4720, 3940, 4810,…\n$ occrecode  <chr> \"Office and Administrative Support\", \"Professional\", NA, NA…\n$ prestg10   <dbl> 25, 66, NA, NA, 37, 45, 59, 49, 28, 38, 47, 45, 50, 29, 33,…\n$ childs     <dbl> 0, 3, 2, 2, 0, 0, 2, 1, 2, 2, 3, 1, 4, 3, 0, 1, 2, 3, 4, 8,…\n$ wrkstat    <chr> \"School\", \"Full-Time\", \"Housekeeper\", \"Housekeeper\", \"Full-…\n$ gender     <chr> \"Male\", \"Male\", \"Female\", \"Female\", \"Female\", \"Male\", \"Male…\n$ educcat    <chr> \"High School\", \"Bachelor\", \"Less Than High School\", \"Less T…\n$ maritalcat <chr> \"Married\", \"Married\", \"Widowed\", \"Widowed\", \"Never Married\"…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwages %>% inspect()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n        name     class levels     n missing\n1  occrecode character     11 58136    3561\n2    wrkstat character      8 61676      21\n3     gender character      2 61697       0\n4    educcat character      5 61562     135\n5 maritalcat character      5 61670      27\n                                   distribution\n1 Professional (19%), Service (16.9%) ...      \n2 Full-Time (49.4%), Housekeeper (15.1%) ...   \n3 Female (56.1%), Male (43.9%)                 \n4 High School (51.5%) ...                      \n5 Married (51.7%), Never Married (21.8%) ...   \n\nquantitative variables:  \n      name   class  min    Q1 median    Q3      max         mean           sd\n1 rownames numeric    1 15425  30849 46273  61697.0 30849.000000 17810.534116\n2     year numeric 1974  1985   1996  2006   2018.0  1996.073715    12.794470\n3 realrinc numeric  227  8156  16563 27171 480144.5 22326.359234 28581.794499\n4      age numeric   18    32     44    59     89.0    46.176177    17.561065\n5    occ10 numeric   10  2710   4720  6230   9997.0  4695.774081  2627.724076\n6 prestg10 numeric   16    33     42    50     80.0    43.060701    12.987526\n7   childs numeric    0     0      2     3      8.0     1.923457     1.763569\n      n missing\n1 61697       0\n2 61697       0\n3 37887   23810\n4 61478     219\n5 58136    3561\n6 57511    4186\n7 61508     189\n```\n\n\n:::\n:::\n\n\n\n\n\n## Munging Data:\n\n> -   we can remove missing data in this case as there is enough data leftover to work with.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean <-\n  wages %>%\n  tidyr::drop_na(realrinc) # choose column or leave blank to choose all\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean <- wages_clean %>%\n  mutate(\n    occrecode = as_factor(occrecode),\n    wrkstat = as_factor(wrkstat),\n    gender = as_factor(gender),\n    educcat = as_factor(educcat),\n    maritalcat = as_factor(maritalcat),\n    rownames = as_factor(rownames),\n    year = as_factor(year)\n    \n  )\nwages_clean\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 37,887 × 12\n   rownames year  realrinc   age occ10 occrecode  prestg10 childs wrkstat gender\n   <fct>    <fct>    <dbl> <dbl> <dbl> <fct>         <dbl>  <dbl> <fct>   <fct> \n 1 1        1974      4935    21  5620 Office an…       25      0 School  Male  \n 2 2        1974     43178    41  2040 Professio…       66      3 Full-T… Male  \n 3 5        1974     18505    58  5820 Office an…       37      0 Full-T… Female\n 4 6        1974     22206    30   910 Business/…       45      0 School  Male  \n 5 7        1974     55515    48   230 Business/…       59      2 Full-T… Male  \n 6 10       1974      4935    54  3940 Service          38      2 Full-T… Female\n 7 15       1974      4935    22  4020 Service          33      0 Full-T… Female\n 8 16       1974     18505    23  7810 Production       28      1 Full-T… Male  \n 9 21       1974     11103    25  8640 Production       31      0 Full-T… Male  \n10 26       1974     30841    59  4710 Sales            48      1 Full-T… Male  \n# ℹ 37,877 more rows\n# ℹ 2 more variables: educcat <fct>, maritalcat <fct>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean %>% inspect()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\ncategorical variables:  \n        name  class levels     n missing\n1   rownames factor  37887 37887       0\n2       year factor     30 37887       0\n3  occrecode factor     11 37797      90\n4    wrkstat factor      8 37887       0\n5     gender factor      2 37887       0\n6    educcat factor      5 37846      41\n7 maritalcat factor      5 37883       4\n                                   distribution\n1 1 (0%), 2 (0%), 5 (0%) ...                   \n2 2006 (7%), 1994 (5.2%) ...                   \n3 Professional (20.6%), Service (16%) ...      \n4 Full-Time (71.6%), Part-Time (13.9%) ...     \n5 Male (50.5%), Female (49.5%)                 \n6 High School (53.1%), Bachelor (17.6%) ...    \n7 Married (53.5%), Never Married (24.6%) ...   \n\nquantitative variables:  \n      name   class min   Q1 median    Q3      max         mean           sd\n1 realrinc numeric 227 8156  16563 27171 480144.5 22326.359234 28581.794499\n2      age numeric  18   30     39    51     89.0    40.948288    13.502676\n3    occ10 numeric  10 2330   4700  6220   9997.0  4568.104691  2658.871969\n4 prestg10 numeric  16   35     44    51     80.0    43.815189    13.085116\n5   childs numeric   0    0      2     3      8.0     1.693459     1.616469\n      n missing\n1 37887       0\n2 37825      62\n3 37797      90\n4 37368     519\n5 37809      78\n```\n\n\n:::\n:::\n\n\n\n\n\n## Q1: What is the basic distribution of realrinc (the respondant's base income)?\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean %>%\n  gf_boxplot(realrinc ~ \"Income\") %>% # Dummy X-axis \"variable\"\n  gf_labs(\n    title = \"Plot 1A: Income has a skewed distribution\",\n    subtitle = \"Many outliers on the high side\"\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\n\n> -   This graph has been plotted on a logarithmic scale (1e+05 = 1 x10\\^5, 2e+05 = 2x10\\^5 and so on) as the data spans a wide range of values\n> -   **FROM THIS GRAPH**\n>     -   Income is a very skewed distribution, as might be expected.\n>     -   Presence of many higher-side outliers is noted.\n\n## Q2: Is realrinc affected by gender?\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean %>%\n  gf_boxplot(gender ~ realrinc) %>%\n  gf_labs(title = \"Plot 2A: Income by Gender\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n\n\n> converting scalenatural log to log base 10. why??\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean %>%\n  gf_boxplot(gender ~ log10(realrinc)) %>%\n  gf_labs(title = \"Plot 2B: Log(Income) by Gender\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwages_clean %>%\n  gf_boxplot(gender ~ realrinc, fill = ~gender) %>%\n  gf_refine(scale_x_log10()) %>%\n  gf_labs(title = \"Plot 2C: Income filled by Gender, log scale\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n\n\n> -   **FROM THE GRAPHS:**\n>\n>     -   Even when split by gender, realincome presents a skewed set of distributions.\n>\n>     -   The IQR for males is smaller than the IQR for females. There is less variation in the middle ranges of realrinc for men.\n>\n>     -   log10 transformation helps to view and understand the regions of low realrinc.\n>\n>     -   There are outliers on both sides, indicating that there may be many people who make very small amounts of money and large amounts of money in both genders.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}